{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || Object.assign || function (t) {\n  for (var s, i = 1, n = arguments.length; i < n; i++) {\n    s = arguments[i];\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n  }\n  return t;\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function sent() {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [0, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  return t;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar types_1 = require(\"./types\");\nvar types_2 = require(\"./types\");\nexports.ClientError = types_2.ClientError;\nrequire(\"cross-fetch/polyfill\");\nvar GraphQLClient = /** @class */function () {\n  function GraphQLClient(url, options) {\n    this.url = url;\n    this.options = options || {};\n  }\n  GraphQLClient.prototype.rawRequest = function (query, variables) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, headers, others, body, response, result, headers_1, status_1, errorResult;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            _a = this.options, headers = _a.headers, others = __rest(_a, [\"headers\"]);\n            body = JSON.stringify({\n              query: query,\n              variables: variables ? variables : undefined\n            });\n            return [4 /*yield*/, fetch(this.url, __assign({\n              method: 'POST',\n              headers: Object.assign({\n                'Content-Type': 'application/json'\n              }, headers),\n              body: body\n            }, others))];\n          case 1:\n            response = _b.sent();\n            return [4 /*yield*/, getResult(response)];\n          case 2:\n            result = _b.sent();\n            if (response.ok && !result.errors && result.data) {\n              headers_1 = response.headers, status_1 = response.status;\n              return [2 /*return*/, __assign({}, result, {\n                headers: headers_1,\n                status: status_1\n              })];\n            } else {\n              errorResult = typeof result === 'string' ? {\n                error: result\n              } : result;\n              throw new types_1.ClientError(__assign({}, errorResult, {\n                status: response.status,\n                headers: response.headers\n              }), {\n                query: query,\n                variables: variables\n              });\n            }\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  GraphQLClient.prototype.request = function (query, variables) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, headers, others, body, response, result, errorResult;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            _a = this.options, headers = _a.headers, others = __rest(_a, [\"headers\"]);\n            body = JSON.stringify({\n              query: query,\n              variables: variables ? variables : undefined\n            });\n            return [4 /*yield*/, fetch(this.url, __assign({\n              method: 'POST',\n              headers: Object.assign({\n                'Content-Type': 'application/json'\n              }, headers),\n              body: body\n            }, others))];\n          case 1:\n            response = _b.sent();\n            return [4 /*yield*/, getResult(response)];\n          case 2:\n            result = _b.sent();\n            if (response.ok && !result.errors && result.data) {\n              return [2 /*return*/, result.data];\n            } else {\n              errorResult = typeof result === 'string' ? {\n                error: result\n              } : result;\n              throw new types_1.ClientError(__assign({}, errorResult, {\n                status: response.status\n              }), {\n                query: query,\n                variables: variables\n              });\n            }\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  GraphQLClient.prototype.setHeaders = function (headers) {\n    this.options.headers = headers;\n    return this;\n  };\n  GraphQLClient.prototype.setHeader = function (key, value) {\n    var headers = this.options.headers;\n    if (headers) {\n      headers[key] = value;\n    } else {\n      this.options.headers = (_a = {}, _a[key] = value, _a);\n    }\n    return this;\n    var _a;\n  };\n  return GraphQLClient;\n}();\nexports.GraphQLClient = GraphQLClient;\nfunction rawRequest(url, query, variables) {\n  return __awaiter(this, void 0, void 0, function () {\n    var client;\n    return __generator(this, function (_a) {\n      client = new GraphQLClient(url);\n      return [2 /*return*/, client.rawRequest(query, variables)];\n    });\n  });\n}\nexports.rawRequest = rawRequest;\nfunction request(url, query, variables) {\n  return __awaiter(this, void 0, void 0, function () {\n    var client;\n    return __generator(this, function (_a) {\n      client = new GraphQLClient(url);\n      return [2 /*return*/, client.request(query, variables)];\n    });\n  });\n}\nexports.request = request;\nexports.default = request;\nfunction getResult(response) {\n  return __awaiter(this, void 0, void 0, function () {\n    var contentType;\n    return __generator(this, function (_a) {\n      contentType = response.headers.get('Content-Type');\n      if (contentType && contentType.startsWith('application/json')) {\n        return [2 /*return*/, response.json()];\n      } else {\n        return [2 /*return*/, response.text()];\n      }\n      return [2 /*return*/];\n    });\n  });\n}","map":null,"metadata":{},"sourceType":"script"}